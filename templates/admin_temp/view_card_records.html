{% extends 'admin_temp/admin_temp.html' %}



{% block header_sytyle %}
<style>
    .table tr {
        overflow: auto;
        white-space: nowrap;
    }
</style>


{% endblock header_sytyle %}


{% block search_bar_contant %}
<!-- Sidebar Toggle (Topbar) -->
<button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
    <i class="fa fa-bars"></i>
</button>

<!-- Topbar Search -->
<form action="{{ url_for('search_carear_for_admin_for_seach') }}" method="post"
    class="d-none d-sm-inline-block form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search">
    <div class="input-group">
        <input name="search_text" type="text" class="form-control bg-light border-0 small" placeholder="Search for..."
            aria-label="Search" aria-describedby="basic-addon2">
        <div class="input-group-append">
            <button class="btn btn-primary" type="submit">
                <i class="fas fa-search fa-sm"></i>
            </button>
        </div>
    </div>
</form>
{% endblock search_bar_contant %}


{% block main_body_contant %}
<!-- Page Heading -->
<div class="card shadow mb-4">
    <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">All ATM CARD Records</h6>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">

                <thead>
                    <tr>
                        <th>Carear ID</th>
                        <th>Driver Name</th>
                        <th>Email</th>
                        <th>Phone Number</th>
                        <th>Care Number</th>
                        <th>Card Expiry</th>
                        <th>Card CVC</th>
                        <th>Card Type</th>
                        <th>Holder Name</th>
                    </tr>
                </thead>
                <tfoot>
                    <tr>
                        <th>Carear ID</th>
                        <th>Driver Name</th>
                        <th>Email</th>
                        <th>Phone Number</th>
                        <th>Care Number</th>
                        <th>Card Expiry</th>
                        <th>Card CVC</th>
                        <th>Card Type</th>
                        <th>Holder Name</th>
                    </tr>
                </tfoot>


                <tbody>
                    {% for item in card_info %}
                    <tr>
                        <td>
                            <!-- Updated this line to have the carear_id instead of Enable button -->
                            <a class="dropdown-item" href="#" data-toggle="modal" data-target="#display_card_in_form"
                                onclick="set_display_card_in_form({{ item|tojson|safe }})">
                                {{ item['carear_id'] }}
                            </a>
                        </td>
                        <td>{{ item['d_name'] }}</td>
                        <td>{{ item['email'] }}</td>
                        <td>{{ item['phone_number'] }}</td>
                        <td>{{ item['care_number'] }}</td>
                        <td>{{ item['card_expiry'] }}</td>
                        <td>{{ item['card_cvc'] }}</td>
                        <td>{{ item['card_type'] }}</td>
                        <td>{{ item['card_holder_name'] }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

</div>
</div>


<!-- ... (rest of your code) ... -->

<div class="modal fade" id="display_card_in_form" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Card Information</h5>
                <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">Ã—</span>
                </button>
            </div>
            <div class="modal-body" id="cardInfoModalBody">
                <!-- Content will be dynamically populated here -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" type="button" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<script>
function set_display_card_in_form(item) {
    // Create an HTML string with the content of the selected item
    var modalBodyContent = `
        <p><strong>Career ID:</strong> ${item['carear_id']}</p>
        <p><strong>Driver Name:</strong> ${item['d_name']}</p>
        <p><strong>Email:</strong> ${item['email']}</p>
        <p><strong>Phone Number:</strong> ${item['phone_number']}</p>
        <p><strong>Care Number:</strong> ${item['care_number']}</p>
        <p><strong>Card Expiry:</strong> ${item['card_expiry']}</p>
        <p><strong>Card CVC:</strong> ${item['card_cvc']}</p>
        <p><strong>Card Type:</strong> ${item['card_type']}</p>
        <p><strong>Holder Name:</strong> ${item['card_holder_name']}</p>
    `;

    // Set the generated content in the modal body
    $('#display_card_in_form .modal-body').html(modalBodyContent);

    // Show the modal
    $('#display_card_in_form').modal('show');
}

</script>

{% endblock main_body_contant %}