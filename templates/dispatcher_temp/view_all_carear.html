{% extends 'dispatcher_temp/dispatcher_temp.html' %}




{% block header_sytyle %}
        
<style>
    .table tr {
        overflow: auto;
        white-space: nowrap;
    }
</style>
{% endblock header_sytyle %}


{% block search_bar_contant %}
                        

<!-- Sidebar Toggle (Topbar) -->
                    <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
                        <i class="fa fa-bars"></i>
                    </button>

                    <!-- Topbar Search -->
                    <form
                    class="d-none d-sm-inline-block form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search">
                        <div class="input-group">
                            <input type="text" class="form-control bg-light border-0 small" placeholder="Search for..."
                            aria-label="Search" aria-describedby="basic-addon2">
                            <div class="input-group-append">
                                <button class="btn btn-primary" type="button">
                                    <i class="fas fa-search fa-sm"></i>
                                </button>
                            </div>
                        </div>
                    </form>
                    {% endblock search_bar_contant %}




{% block main_body_contant %}
                    
            <!-- Page Heading -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">All Sales Records</h6>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">

                            <thead>
                                <tr>
                                    <th>Carear ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Driver</th>
                                    <th>Phone Number</th>
                                    <th>MC & USDOT</th>
                                    <th>Chargers</th>
                                    <th>Company Name</th>
                                    <th>Truck & Truck Number</th>
                                    <th>Date</th>
                                    <th>Factoring Numumber & Email</th>
                                    <th>EIN</th>
                                    <th>Bank Name</th>
                                    <th>Physical Address</th>
                                    <th>Factoring Address</th>
                                    <th>Account Number</th>
                                    <th>Routing Number</th>
                                    <th>Refrence</th>
                                    <th>Insurance Details</th>
                                    <th>Comments</th>
                                    <th>Equipments</th>
                                    <th>Factoring Name</th>
                                </tr>
                            </thead>
                            <tfoot>
                                <tr>
                                    <th>Carear ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Driver</th>
                                    <th>Phone Number</th>
                                    <th>MC & USDOT</th>
                                    <th>Chargers</th>
                                    <th>Company Name</th>
                                    <th>Truck & Truck Number</th>
                                    <th>Date</th>
                                    <th>Factoring Numumber & Email</th>
                                    <th>EIN</th>
                                    <th>Bank Name</th>
                                    <th>Physical Address</th>
                                    <th>Factoring Address</th>
                                    <th>Account Number</th>
                                    <th>Routing Number</th>
                                    <th>Refrence</th>
                                    <th>Insurance Details</th>
                                    <th>Comments</th>
                                    <th>Equipments</th>
                                    <th>Factoring Name</th>
                                </tr>
                            </tfoot>
                            <tbody>
                                {% for item in carear_info %}

                                <tr>

                                    <td>
                                        <a href="{{ url_for('display_give_load_to_carear', carear_id=item['carear_id']) }}" type="submit" class="btn">
                                            <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                                            {{item['carear_id']}}
                                        </a>
                                    </td>

                                
                                    <td>
                                        <button class="dropdown-item openPopupBtn" data-career-id="{{ item['carear_id'] }}">
                                            <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                                            {{ item['carear_name'] }}
                                        </button>
                                    </td>

                                    
                                    
                                    <td>{{item['email']}}</td>
                                    <td>{{item['driver']}}</td>
                                    <td>{{item['phone_number']}}</td>
                                    <td>{{item['mc_usdot']}}</td>
                                    <td>{{item['charges']}}</td>
                                    <td>{{item['company_name']}}</td>
                                    <td>{{item['t_number']}}</td>
                                    <td>{{item['date']}}</td>
                                    <td>{{item['factoring_num_email']}}</td>
                                    <td>{{item['ein']}}</td>
                                    <td>{{item['bank_name']}}</td>
                                    <td>{{item['physical_address']}}</td>
                                    <td>{{item['factoring_address']}}</td>
                                    <td>{{item['account_number']}}</td>
                                    <td>{{item['routing_number']}}</td>
                                    <td>{{item['refrence']}}</td>
                                    <td>{{item['insurance_details']}}</td>
                                    <td>{{item['comments']}}</td>
                                    <td>{{item['equipments']}}</td>
                                    <td>{{item['factoring_name']}}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
 <!-- End of Main Content -->

                <!-- Footer -->
                <!-- <footer class="sticky-footer bg-white">
                    <div class="container my-auto">
                        <div class="copyright text-center my-auto">
                            <span>Copyright &copy; Your Website 2021</span>
                        </div>
                    </div>
                </footer> -->
                <!-- End of Footer -->

            </div>
            <!-- End of Content Wrapper -->

        </div>
        <!-- End of Page Wrapper -->


<!-- Your modal content -->
<div class="modal fade" id="card_url_info" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Card Information</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                     <p>Career ID: <a href="">http://127.0.0.1:5000//gernater_url_to_store_card_info//<span id="careerIdPlaceholder"></span></a></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <!-- Add other modal buttons here -->
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        // Handle the click event on the link
        $('.dropdown-item').on('click', function() {
            // Get the career ID from the data attribute
            var careerId = $(this).data('career-id');
            
            // Set the career ID in the modal
            $('#careerIdPlaceholder').text(careerId);
        });
    });
</script>


<div class="modal fade bd-example-modal-xl" id="popupModal" tabindex="-1" aria-labelledby="popupModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="popupModalLabel">Career Details</h5>
                <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            
            <!-- Content of your popup goes here -->
            <div class="modal-body" id="popupContent"></div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>



<script>
$(document).ready(function() {
    // Add click event listener to the buttons
    $('.openPopupBtn').on('click', function() {
        // Get the career ID from the data attribute
        var careerId = $(this).data('career-id');

        // Make an AJAX request to get the content and variable for the popup
        $.ajax({
            url: '/popup_content?careerId=' + encodeURIComponent(careerId),
            method: 'GET',
            dataType: 'json',
            success: function (response) {
                // Update the modal content with the received content and variable
                var popupContent = `
                



                <section class="form-02-main student-page">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="_lk_de">

                    <div class="form-04-main">
                        <!-- <div class="logo">
                            <img src="/static/images/public_images/user.png">
                        </div> -->
                        <h1 class="text-center">Carear Detailes</h1>

                        <div class="form-group">
<div class="container">
    <div class="main-body ">

        <div class="row gutters-sm">

            <div class="col-md-12">
                <div class="mb-3">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">Company Name</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.company_name}
                            </h5>
                            <!-- </div>
                            <hr>
                            <div class="row"> -->
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">Carear Name</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.carear_name}
                            </h5>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">US DOT
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.usdot}    
                            </h5>
                            <!-- </div>
                            <hr>
                            <div class="row"> -->
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">MC</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.mc}
                            </h5>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">Crear Email</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.email}                                             
                            </h5>
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">Carear Phone</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.phone_number}                                    
                            </h5>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">Truck type & Number</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.truck_type_and_number}                          
                            </h5>
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">EIN</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.ein}                                                
                            </h5>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">INC Name</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.inc_name}
                            </h5>
                            <!-- </div>
                            <hr>
                            <div class="row"> -->
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">INC Number</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                <p>${response.career_info.inc_number}</p>
                            </h5>
                        </div>


                        <hr>
                        <div class="row">
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">INC Address</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.inc_address}                                       
                            </h5>
                            <!-- </div>
                            <hr>
                            <div class="row"> -->
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">INC Email</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.inc_email}
                            </h5>
                        </div>
                        <hr>
                        
                        <div class="row">
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">INC Fax Number</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.inc_fax_number}
                            </h5>
                            <!-- </div>
                            <hr>
                            <div class="row"> -->
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">INC Coverges</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.inc_coverges}
                            </h5>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">Fac Name</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.fac_name}
                            </h5>

                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">Fac Phone Number</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.fac_phone_number}
                            </h5>
                        </div>
                        <hr>

                        <div class="row">
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">Fac Email</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.fac_email}
                            </h5>

                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">Fac Address</h6>
                            </div>
                            <h5 class="col-sm-2 ">
                                ${response.career_info.fac_address}
                            </h5>
                        </div>
                        <hr>
                        

                        
                        <div class="row">
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">Bank Name</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.bank_name}
                            </h5>

                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">Routing Number</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.routing_number}
                            </h5>
                        </div>

                        <hr>

                        <div class="row">
                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">Account Number</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.account_number}
                            </h5>

                            <div class="col-sm-2 text-secondary">
                                <h6 class="mb-0">Bank Phone</h6>
                            </div>
                            <h5 class="col-sm-4 ">
                                ${response.career_info.bank_phone_number}
                            </h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</div>
</div>
</div>
</div>
</div>
</section>                `;
                $('#popupContent').html(popupContent);
                
                // Show the modal
                $('#popupModal').modal('show');
            },
            error: function (error) {
                console.log('Error:', error);
            }
        });
    });
});

</script>

{% endblock main_body_contant %}